<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset='utf-8'>
	<meta name='viewport' content='width=device-width,initial-scale=1'>

	<title>Mini Helper</title>

	<link rel='icon' type='image/png' href='/favicon.png'>
	<link rel='stylesheet' href='/build/bundle.css'>
	<link rel='stylesheet' href='/global.css'>

	<script defer src='/build/bundle.js'></script>
	<script>
		if ('serviceWorker' in navigator) {
			navigator.serviceWorker.register('combined-offline-cache.js').then(function (registration) {
				console.log('Service Worker registered with scope:', registration.scope);
			}).catch(function (error) {
				console.log('Service Worker registration failed:', error);
			});
		}

		self.addEventListener('install', function (event) {
			event.waitUntil(
				caches.open('my-cache').then(function (cache) {
					return cache.addAll([
						// 这里可以引入需要缓存的文件，例如：
						// '/', // 缓存首页
						// '/styles/main.css', // 缓存 CSS
						// '/scripts/app.js' // 缓存 JS
					]);
				})
			);
		});

		self.addEventListener('activate', function (event) {
			// 激活后的逻辑
		});

		self.addEventListener('fetch', function (event) {
			event.respondWith(
				caches.match(event.request).then(function (response) {
					// 处理请求
					return response || fetch(event.request).then(function (response) {
						// 更新缓存
						return caches.open('my-cache').then(function (cache) {
							cache.put(event.request, response.clone());
							return response;
						});
					});
				})
			);
		});
	</script>
</head>

<body>
</body>

</html>
